{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport api from '@/services/api';\nexport default {\n  data() {\n    return {\n      wastes: [],\n      newWaste: {\n        name: '',\n        pricePublic: 0,\n        priceInternal: 0,\n        priceWholesale: 0\n      },\n      showAddWasteForm: false,\n      showDeleteModal: false,\n      deleteWasteId: null,\n      isEditing: false,\n      editWasteId: null\n    };\n  },\n  created() {\n    this.fetchWastes();\n  },\n  methods: {\n    fetchWastes() {\n      api.getAllWaste().then(response => {\n        this.wastes = response.data;\n      }).catch(error => {\n        console.error('Error fetching wastes:', error);\n      });\n    },\n    toggleAddWasteForm() {\n      this.showAddWasteForm = !this.showAddWasteForm;\n      if (!this.showAddWasteForm) {\n        this.resetForm();\n      }\n    },\n    async submitForm() {\n      if (this.isEditing) {\n        await this.updateWaste();\n      } else {\n        await this.createWaste();\n      }\n    },\n    async createWaste() {\n      try {\n        const response = await api.createWaste(this.newWaste);\n        this.wastes.push(response.data);\n        this.resetForm();\n      } catch (error) {\n        console.error('Error creating waste:', error);\n      }\n    },\n    async updateWaste() {\n      try {\n        await api.updateWaste(this.editWasteId, this.newWaste);\n        const index = this.wastes.findIndex(waste => waste._id === this.editWasteId);\n        if (index !== -1) {\n          this.wastes.splice(index, 1, {\n            ...this.newWaste,\n            _id: this.editWasteId\n          });\n        }\n        this.resetForm();\n      } catch (error) {\n        console.error('Error updating waste:', error);\n      }\n    },\n    confirmDeleteWaste(waste) {\n      this.showDeleteModal = true;\n      this.deleteWasteId = waste._id;\n    },\n    async deleteWaste() {\n      try {\n        await api.deleteWaste(this.deleteWasteId);\n        this.wastes = this.wastes.filter(waste => waste._id !== this.deleteWasteId);\n        this.closeDeleteModal();\n      } catch (error) {\n        console.error('Error deleting waste:', error);\n      }\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteWasteId = null;\n    },\n    editWaste(waste) {\n      this.newWaste = {\n        ...waste\n      };\n      this.editWasteId = waste._id;\n      this.isEditing = true;\n      this.showAddWasteForm = true;\n    },\n    cancelEdit() {\n      this.resetForm();\n    },\n    resetForm() {\n      this.newWaste = {\n        name: '',\n        pricePublic: 0,\n        priceInternal: 0,\n        priceWholesale: 0\n      };\n      this.isEditing = false;\n      this.editWasteId = null;\n      this.showAddWasteForm = false;\n    }\n  }\n};","map":{"version":3,"names":["api","data","wastes","newWaste","name","pricePublic","priceInternal","priceWholesale","showAddWasteForm","showDeleteModal","deleteWasteId","isEditing","editWasteId","created","fetchWastes","methods","getAllWaste","then","response","catch","error","console","toggleAddWasteForm","resetForm","submitForm","updateWaste","createWaste","push","index","findIndex","waste","_id","splice","confirmDeleteWaste","deleteWaste","filter","closeDeleteModal","editWaste","cancelEdit"],"sources":["/home/edward/summer-project/frontend/src/components/forms/WasteForm.vue"],"sourcesContent":["<script>\nimport api from '@/services/api';\n\nexport default {\n  data() {\n    return {\n      wastes: [],\n      newWaste: {\n        name: '',\n        pricePublic: 0,\n        priceInternal: 0,\n        priceWholesale: 0\n      },\n      showAddWasteForm: false,\n      showDeleteModal: false,\n      deleteWasteId: null,\n      isEditing: false,\n      editWasteId: null\n    };\n  },\n  created() {\n    this.fetchWastes();\n  },\n  methods: {\n    fetchWastes() {\n      api.getAllWaste()\n        .then(response => {\n          this.wastes = response.data;\n        })\n        .catch(error => {\n          console.error('Error fetching wastes:', error);\n        });\n    },\n    toggleAddWasteForm() {\n      this.showAddWasteForm = !this.showAddWasteForm;\n      if (!this.showAddWasteForm) {\n        this.resetForm();\n      }\n    },\n    async submitForm() {\n      if (this.isEditing) {\n        await this.updateWaste();\n      } else {\n        await this.createWaste();\n      }\n    },\n    async createWaste() {\n      try {\n        const response = await api.createWaste(this.newWaste);\n        this.wastes.push(response.data);\n        this.resetForm();\n      } catch (error) {\n        console.error('Error creating waste:', error);\n      }\n    },\n    async updateWaste() {\n      try {\n        await api.updateWaste(this.editWasteId, this.newWaste);\n        const index = this.wastes.findIndex(waste => waste._id === this.editWasteId);\n        if (index !== -1) {\n          this.wastes.splice(index, 1, { ...this.newWaste, _id: this.editWasteId });\n        }\n        this.resetForm();\n      } catch (error) {\n        console.error('Error updating waste:', error);\n      }\n    },\n    confirmDeleteWaste(waste) {\n      this.showDeleteModal = true;\n      this.deleteWasteId = waste._id;\n    },\n    async deleteWaste() {\n      try {\n        await api.deleteWaste(this.deleteWasteId);\n        this.wastes = this.wastes.filter(waste => waste._id !== this.deleteWasteId);\n        this.closeDeleteModal();\n      } catch (error) {\n        console.error('Error deleting waste:', error);\n      }\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteWasteId = null;\n    },\n    editWaste(waste) {\n      this.newWaste = { ...waste };\n      this.editWasteId = waste._id;\n      this.isEditing = true;\n      this.showAddWasteForm = true;\n    },\n    cancelEdit() {\n      this.resetForm();\n    },\n    resetForm() {\n      this.newWaste = {\n        name: '',\n        pricePublic: 0,\n        priceInternal: 0,\n        priceWholesale: 0\n      };\n      this.isEditing = false;\n      this.editWasteId = null;\n      this.showAddWasteForm = false;\n    }\n  }\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport api from '@/services/api';\nexport default {\n  data() {\n    return {\n      customers: [],\n      newCustomer: {\n        name: '',\n        type: ''\n      },\n      customerTypes: ['internal', 'wholesale', 'public'],\n      showAddCustomerForm: false,\n      showDeleteModal: false,\n      deleteCustomerId: null,\n      isEditing: false,\n      editCustomerId: null\n    };\n  },\n  created() {\n    this.fetchCustomers();\n  },\n  methods: {\n    async fetchCustomers() {\n      try {\n        const response = await api.getAllCustomers();\n        console.log('Fetched customers:', response.data);\n        this.customers = response.data;\n      } catch (error) {\n        console.error('Error fetching customers:', error);\n      }\n    },\n    toggleAddCustomerForm() {\n      this.showAddCustomerForm = !this.showAddCustomerForm;\n      if (!this.showAddCustomerForm) {\n        this.resetForm();\n      }\n    },\n    async submitForm() {\n      if (this.isEditing) {\n        await this.updateCustomer();\n      } else {\n        await this.createCustomer();\n      }\n    },\n    async createCustomer() {\n      try {\n        const response = await api.createCustomer(this.newCustomer);\n        this.customers.push(response.data);\n        this.resetForm();\n      } catch (error) {\n        console.error('Error creating customer:', error);\n      }\n    },\n    async updateCustomer() {\n      try {\n        await api.updateCustomer(this.editCustomerId, this.newCustomer);\n        const index = this.customers.findIndex(customer => customer._id === this.editCustomerId);\n        if (index !== -1) {\n          this.customers.splice(index, 1, {\n            ...this.newCustomer,\n            _id: this.editCustomerId\n          });\n        }\n        this.resetForm();\n      } catch (error) {\n        console.error('Error updating customer:', error);\n      }\n    },\n    confirmDeleteCustomer(customer) {\n      this.showDeleteModal = true;\n      this.deleteCustomerId = customer._id;\n    },\n    async deleteCustomer() {\n      try {\n        await api.deleteCustomer(this.deleteCustomerId);\n        this.customers = this.customers.filter(customer => customer._id !== this.deleteCustomerId);\n        this.closeDeleteModal();\n      } catch (error) {\n        console.error('Error deleting customer:', error);\n      }\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteCustomerId = null;\n    },\n    editCustomer(customer) {\n      this.newCustomer = {\n        ...customer\n      };\n      this.editCustomerId = customer._id;\n      this.isEditing = true;\n      this.showAddCustomerForm = true;\n    },\n    cancelEdit() {\n      this.resetForm();\n    },\n    resetForm() {\n      this.newCustomer = {\n        name: '',\n        type: ''\n      };\n      this.isEditing = false;\n      this.editCustomerId = null;\n      this.showAddCustomerForm = false;\n    }\n  }\n};","map":{"version":3,"names":["api","data","customers","newCustomer","name","type","customerTypes","showAddCustomerForm","showDeleteModal","deleteCustomerId","isEditing","editCustomerId","created","fetchCustomers","methods","response","getAllCustomers","console","log","error","toggleAddCustomerForm","resetForm","submitForm","updateCustomer","createCustomer","push","index","findIndex","customer","_id","splice","confirmDeleteCustomer","deleteCustomer","filter","closeDeleteModal","editCustomer","cancelEdit"],"sources":["/home/edward/summer-project/frontend/src/components/forms/customerForm.vue"],"sourcesContent":["<template>\n  <div class=\"container\">\n    <table class=\"data-table\">\n      <thead>\n        <tr>\n          <th>Name</th>\n          <th>Type</th>\n          <th>Actions</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"customer in customers\" :key=\"customer._id\" class=\"data-item\">\n          <td>{{ customer.name }}</td>\n          <td>{{ customer.type }}</td>\n          <td class=\"action-buttons\">\n            <button class=\"btn edit-btn\" @click=\"editCustomer(customer)\">Edit</button>\n            <button class=\"btn delete-btn\" @click=\"confirmDeleteCustomer(customer)\">Delete</button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Toggle Add New Customer Button -->\n    <button @click=\"toggleAddCustomerForm\" class=\"btn add-btn\">\n      {{ showAddCustomerForm ? \"Cancel\" : \"Add Customer\" }}\n    </button>\n\n    <!-- Customer Form -->\n    <form v-if=\"showAddCustomerForm\" @submit.prevent=\"submitForm\" class=\"data-form\">\n      <input v-model=\"newCustomer.name\" placeholder=\"Name\" required class=\"input-field\">\n      <select v-model=\"newCustomer.type\" required class=\"input-field\">\n        <option value=\"\" disabled>Select Type</option>\n        <option v-for=\"customerType in customerTypes\" :key=\"customerType\" :value=\"customerType\">\n          {{ customerType }}\n        </option>\n      </select>\n      <div class=\"form-buttons\">\n        <button type=\"submit\" class=\"btn submit-btn\">{{ isEditing ? 'Update' : 'Add' }} Customer</button>\n        <button type=\"button\" @click=\"cancelEdit\" class=\"btn cancel-btn\">Cancel</button>\n      </div>\n    </form>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"showDeleteModal\" class=\"modal\">\n      <div class=\"modal-content\">\n        <p>Are you sure you want to delete this customer?</p>\n        <div class=\"modal-buttons\">\n          <button class=\"btn confirm-delete-btn\" @click=\"deleteCustomer\">Yes, Delete</button>\n          <button class=\"btn cancel-btn\" @click=\"closeDeleteModal\">Cancel</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport api from '@/services/api';\n\nexport default {\n  data() {\n    return {\n      customers: [],\n      newCustomer: {\n        name: '',\n        type: ''\n      },\n      customerTypes: ['internal', 'wholesale', 'public'],\n      showAddCustomerForm: false,\n      showDeleteModal: false,\n      deleteCustomerId: null,\n      isEditing: false,\n      editCustomerId: null\n    };\n  },\n  created() {\n    this.fetchCustomers();\n  },\n  methods: {\n    async fetchCustomers() {\n      try {\n        const response = await api.getAllCustomers();\n        console.log('Fetched customers:', response.data);\n        this.customers = response.data;\n      } catch (error) {\n        console.error('Error fetching customers:', error);\n      }\n    },\n    toggleAddCustomerForm() {\n      this.showAddCustomerForm = !this.showAddCustomerForm;\n      if (!this.showAddCustomerForm) {\n        this.resetForm();\n      }\n    },\n    async submitForm() {\n      if (this.isEditing) {\n        await this.updateCustomer();\n      } else {\n        await this.createCustomer();\n      }\n    },\n    async createCustomer() {\n      try {\n        const response = await api.createCustomer(this.newCustomer);\n        this.customers.push(response.data);\n        this.resetForm();\n      } catch (error) {\n        console.error('Error creating customer:', error);\n      }\n    },\n    async updateCustomer() {\n      try {\n        await api.updateCustomer(this.editCustomerId, this.newCustomer);\n        const index = this.customers.findIndex(customer => customer._id === this.editCustomerId);\n        if (index !== -1) {\n          this.customers.splice(index, 1, { ...this.newCustomer, _id: this.editCustomerId });\n        }\n        this.resetForm();\n      } catch (error) {\n        console.error('Error updating customer:', error);\n      }\n    },\n    confirmDeleteCustomer(customer) {\n      this.showDeleteModal = true;\n      this.deleteCustomerId = customer._id;\n    },\n    async deleteCustomer() {\n      try {\n        await api.deleteCustomer(this.deleteCustomerId);\n        this.customers = this.customers.filter(customer => customer._id !== this.deleteCustomerId);\n        this.closeDeleteModal();\n      } catch (error) {\n        console.error('Error deleting customer:', error);\n      }\n    },\n    closeDeleteModal() {\n      this.showDeleteModal = false;\n      this.deleteCustomerId = null;\n    },\n    editCustomer(customer) {\n      this.newCustomer = { ...customer };\n      this.editCustomerId = customer._id;\n      this.isEditing = true;\n      this.showAddCustomerForm = true;\n    },\n    cancelEdit() {\n      this.resetForm();\n    },\n    resetForm() {\n      this.newCustomer = {\n        name: '',\n        type: ''\n      };\n      this.isEditing = false;\n      this.editCustomerId = null;\n      this.showAddCustomerForm = false;\n    }\n  }\n};\n</script>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}